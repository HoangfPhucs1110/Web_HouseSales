@model IEnumerable<Web_HouseSale.Models.Product>
@{
    ViewBag.Title = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var products = Model.ToList();
    var newProducts = products.Where(p => p.IsNew).Take(12).ToList();
    if (newProducts.Count == 0)
    {
        newProducts = products.OrderByDescending(p => p.Id).Take(12).ToList();
    }

    var topSelling = products
        .Where(p => p.SalePercent.HasValue && p.SalePercent > 0)
        .OrderByDescending(p => p.SalePercent)
        .Take(12)
        .ToList();

    Func<Web_HouseSale.Models.Product, string> getProductImage = (p) =>
        !string.IsNullOrWhiteSpace(p.ImageUrl) ? p.ImageUrl :
        (!string.IsNullOrWhiteSpace(p.ImageUrl2) ? p.ImageUrl2 :
        (!string.IsNullOrWhiteSpace(p.ImageUrl3) ? p.ImageUrl3 :
        (!string.IsNullOrWhiteSpace(p.ImageUrl4) ? p.ImageUrl4 : "~/img/product01.png")));
}
<!-- SECTION -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">

            <!-- section title -->
            <div class="col-md-12">
                <div class="section-title">
                    <h3 class="title">New Products</h3>
                </div>
            </div>
            <!-- /section title -->
            <!-- Products tab & slick -->
            <div class="col-md-12">
                <div class="row">
                    <div class="products-tabs">
                        <div id="tab1" class="tab-pane active">
                            <div class="products-slick" data-nav="#slick-nav-1">
                                @foreach (var p in newProducts)
                                {
                                    <div class="product">
                                        <div class="product-img">
                                            <img src="@Url.Content(getProductImage(p))" alt="@p.Name" />
                                            <div class="product-label">
                                                @if (p.SalePercent.HasValue)
                                                {<span class="sale">-@p.SalePercent%</span>}
                                                @if (p.IsNew)
                                                {<span class="new">NEW</span>}
                                            </div>
                                        </div>
                                        <div class="product-body">
                                            <p class="product-category">@p.Category</p>
                                            <h3 class="product-name">
                                                <a href="@Url.Action("Details", "Product", new { slug = p.Slug })">@p.Name</a>
                                            </h3>
                                            <h4 class="product-price">
                                                @p.Price.ToString("c")
                                                @if (p.OldPrice.HasValue)
                                                {<del class="product-old-price">@p.OldPrice.Value.ToString("c")</del>}
                                            </h4>
                                        </div>
                                    </div>
                                }
                            </div>
                            <div id="slick-nav-1" class="products-slick-nav"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /Products tab & slick -->
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /SECTION -->
<!-- HOT DEAL SECTION -->
<div id="hot-deal" class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <div class="hot-deal">
                    <ul class="hot-deal-countdown">
                        <li>
                            <div>
                                <h3>02</h3>
                                <span>Days</span>
                            </div>
                        </li>
                        <li>
                            <div>
                                <h3>10</h3>
                                <span>Hours</span>
                            </div>
                        </li>
                        <li>
                            <div>
                                <h3>34</h3>
                                <span>Mins</span>
                            </div>
                        </li>
                        <li>
                            <div>
                                <h3>60</h3>
                                <span>Secs</span>
                            </div>
                        </li>
                    </ul>
                    <h2 class="text-uppercase">hot deal this week</h2>
                    <p>New Collection Up to 50% OFF</p>
                    <a class="primary-btn cta-btn" href="@Url.Action("Index","Store")">Shop now</a>
                </div>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /HOT DEAL SECTION -->
<!-- SECTION -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">

            <!-- section title -->
            <div class="col-md-12">
                <div class="section-title">
                    <h3 class="title">Top selling</h3>
                </div>
            </div>
            <!-- /section title -->
            <!-- Products tab & slick -->
            <div class="col-md-12">
                <div class="row">
                    <div class="products-tabs">
                        <div id="tab2" class="tab-pane fade in active">
                            <div class="products-slick" data-nav="#slick-nav-2">
                                @foreach (var p in topSelling)
                                {
                                    <div class="product">
                                        <div class="product-img">
                                            <img src="@Url.Content(getProductImage(p))" alt="@p.Name" />
                                            <div class="product-label">
                                                <span class="sale">-@p.SalePercent%</span>
                                                @if (p.IsNew)
                                                {<span class="new">NEW</span>}
                                            </div>
                                        </div>
                                        <div class="product-body">
                                            <p class="product-category">@p.Category</p>
                                            <h3 class="product-name">
                                                <a href="@Url.Action("Index", "Product", new { slug = p.Slug })">@p.Name</a>
                                            </h3>
                                            <h4 class="product-price">
                                                @p.Price.ToString("c")
                                                @if (p.OldPrice.HasValue)
                                                {<del class="product-old-price">@p.OldPrice.Value.ToString("c")</del>}
                                            </h4>
                                        </div>
                                    </div>
                                }
                            </div>
                            <div id="slick-nav-2" class="products-slick-nav"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /Products tab & slick -->
        </div>
    </div>
</div>
<!-- /SECTION -->
        </div>
<!-- /row -->
    </div>
<!-- /container -->
</div>
<!-- /SECTION -->